<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>First test - Panda Lab</title> <meta name="Description" content="Create a test with pandalab"> <link rel="shortcut icon" href="https://mobiletribe.github.io/panda-lab/public/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="https://mobiletribe.github.io/panda-lab/public/assets/css/just-the-docs.css"> <script type="text/javascript" src="https://mobiletribe.github.io/panda-lab/public/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://mobiletribe.github.io/panda-lab/public/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>First test | Panda Lab</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="First test" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Create a test with pandalab" /> <meta property="og:description" content="Create a test with pandalab" /> <link rel="canonical" href="https://mobiletribe.github.io/panda-lab/public/create-test" /> <meta property="og:url" content="https://mobiletribe.github.io/panda-lab/public/create-test" /> <meta property="og:site_name" content="Panda Lab" /> <script type="application/ld+json"> {"url":"https://mobiletribe.github.io/panda-lab/public/create-test","headline":"First test","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mobiletribe.github.io/panda-lab/public/assets/logo.png"}},"description":"Create a test with pandalab","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="https://mobiletribe.github.io/panda-lab/public" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="https://mobiletribe.github.io/panda-lab/public/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="https://mobiletribe.github.io/panda-lab/public/" class="navigation-list-link">Home</a></li><li class="navigation-list-item"><a href="https://mobiletribe.github.io/panda-lab/public/configure" class="navigation-list-link">Configure</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://mobiletribe.github.io/panda-lab/public/create-project/" class="navigation-list-link">Create project</a></li><li class="navigation-list-item "><a href="https://mobiletribe.github.io/panda-lab/public/web-config/" class="navigation-list-link">Web configuration</a></li><li class="navigation-list-item "><a href="https://mobiletribe.github.io/panda-lab/public/android-config/" class="navigation-list-link">Android configuration</a></li><li class="navigation-list-item "><a href="https://mobiletribe.github.io/panda-lab/public/identity-providers/" class="navigation-list-link">Identity providers</a></li></ul></li><li class="navigation-list-item"><a href="https://mobiletribe.github.io/panda-lab/public/install" class="navigation-list-link">Install</a></li><li class="navigation-list-item"><a href="https://mobiletribe.github.io/panda-lab/public/setup-agent" class="navigation-list-link">Agent</a></li><li class="navigation-list-item active"><a href="https://mobiletribe.github.io/panda-lab/public/create-test" class="navigation-list-link active">First test</a></li><li class="navigation-list-item"><a href="https://mobiletribe.github.io/panda-lab/public/roadmap" class="navigation-list-link">Roadmap</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Panda Lab" aria-label="Search Panda Lab" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="//github.com/MobileTribe/panda-lab">PandaLab on GitHub</a></li> </ul> </div> <div class="page"> <div id="main-content" class="page-content" role="main"> <h1 id="create-your-first-test"> <a href="#create-your-first-test" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create your first test </h1> <p>The PandaLab gradle plugin helps you create test tasks to run on the lab. It is possible to create different gradle tasks to deal with very specific needs.</p> <h2 id="configuration"> <a href="#configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Configuration </h2> <p>Add the gradle plugin classpath to the build.gradle file at the root of the project:</p> <p>pandalab_version = <img src="https://api.bintray.com/packages/mobiletribe/maven/com.leroymerlin.plugins:pandalab-plugin/images/download.svg" alt="https://bintray.com/mobiletribe/maven/com.leroymerlin.plugins:pandalab-plugin/_latestVersion" /></p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span><span class="o">{</span>
        <span class="n">jcenter</span><span class="o">()</span>
    <span class="o">}</span>   
    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="s2">"com.leroymerlin.pandalab:gradle-plugin:$pandalab_version"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Then modify the build.gradle file of your application module to configure the PandaLab plugin :</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'com.leroymerlin.pandalab'</span>

<span class="n">pandalab</span> <span class="o">{</span>
    <span class="n">serviceAccountFile</span> <span class="o">=</span> <span class="n">file</span><span class="o">(</span><span class="s2">"path/to/your/firebase-adminsdk.json"</span><span class="o">)</span>
    <span class="n">appName</span> <span class="o">=</span> <span class="s2">"APP NAME"</span>
    <span class="n">apiUrl</span> <span class="o">=</span> <span class="s2">"YOUR FIREBASE REST API URL"</span>
<span class="o">}</span>
</code></pre></div></div> <p>To know how to recover the file please consult the following link : <a href="https://firebase.google.com/docs/admin/setup">firebase documentation</a></p> <h2 id="write-test"> <a href="#write-test" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Write test </h2> <h3 id="ui-tests"> <a href="#ui-tests" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> UI tests </h3> <p>Check the <a href="https://developer.android.com/training/testing/ui-testing">official documentation</a> to build your <strong>Espresso/UI automation</strong> tests.</p> <h3 id="take-screenshot"> <a href="#take-screenshot" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Take screenshot </h3> <p>If you want screenshot in your test report you have to use <a href="https://github.com/square/spoon">Spoon</a></p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">compile</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="s2">"com.squareup.spoon:spoon-client:1.7.1"</span>
<span class="o">}</span>
</code></pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Spoon</span><span class="o">.</span><span class="na">screenshot</span><span class="o">(</span><span class="n">activity</span><span class="o">,</span> <span class="s">"initial_state"</span><span class="o">);</span>
</code></pre></div></div> <h2 id="create-a-task"> <a href="#create-a-task" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create a task </h2> <p><code class="highlighter-rouge">pandalab</code> extension allows you to define various parameters in order to launch your instrumentation tests on your phone fleet. You must define the variant name to test, then you can define the devices ids or groups on which the tests must run.</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pandalab</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    <span class="n">tests</span> <span class="o">{</span>
        <span class="n">test1</span> <span class="o">{</span>
            <span class="n">variantName</span> <span class="o">=</span> <span class="s2">"debug"</span> <span class="c1">//required</span>
            <span class="n">devices</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"345678765433456"</span><span class="o">,</span> <span class="s2">"09876543456789098765"</span><span class="o">]</span> <span class="c1">//default []</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"pandalab"</span><span class="o">]</span> <span class="c1">//default []</span>
            <span class="n">devicesCount</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">//default 0</span>
            <span class="n">timeoutInSecond</span> <span class="o">=</span> <span class="mi">1800</span> <span class="c1">//default 3 hours</span>
            <span class="n">waitForResult</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//default true</span>
            <span class="n">enable</span> <span class="o">=</span> <span class="kc">true</span><span class="c1">//default true</span>
        <span class="o">}</span>
        <span class="n">test2</span> <span class="o">{</span>
            <span class="n">variantName</span> <span class="o">=</span> <span class="s2">"debug"</span>
            <span class="c1">//...</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <div class="code-example"> <ul> <li><strong>variantName</strong>: name of the variant to retrieve the apk that will be launched for the tests</li> <li><strong>devices</strong>: the identifiers of the devices on which the tests will be run. The identifiers can be found in the web interface.</li> <li><strong>groups</strong>: the name of the device groups on which the tests will be run.</li> <li><strong>devicesCount</strong>: the number of device to use. 0 will use all the selected devices.</li> <li><strong>timeoutInSecond</strong>: timeout in second. The default value is <em>900 seconds</em>.</li> <li><strong>waitForResult</strong>: wait for the result on all tests launched. Very useful for fail a CI job. The default value is <em>true</em>.</li> <li><strong>enable</strong>: Enable a task. The default value is true.</li> </ul> </div> <p>The different tests declared in <code class="highlighter-rouge">tests</code> generate gradle tasks with the name of the test with the suffix <code class="highlighter-rouge">PandaLabTest</code>.</p> <p>In the example above, it generates the tasks : <code class="highlighter-rouge">test1PandaLabTest</code> and <code class="highlighter-rouge">test2PandaLabTest</code></p> <h3 id="run-one-task"> <a href="#run-one-task" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Run one task </h3> <p>To launch the previously created task <code class="highlighter-rouge">test1</code>, launch the command line :</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew app:test1PandaLabTest
</code></pre></div></div> <h3 id="run-all-tasks"> <a href="#run-all-tasks" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Run all tasks </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew runPandaLabTests
</code></pre></div></div> <h3 id="upload-a-version"> <a href="#upload-a-version" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Upload a version </h3> <p>If you just want to upload a new version to the web interface for a latter use, you can run</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew uploadToPandaLab
</code></pre></div></div> <p>That way you will be able to create a test from this version directly in the web interface.</p> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0">Distributed by an <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0.</a></p> </footer> </div> </div> </div> </div> </body> </html>
